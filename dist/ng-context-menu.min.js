!function(e){"use strict";e.module("ng-context-menu",[]).factory("ContextMenuService",function(){return{element:null,menuElement:null}}).directive("contextMenu",["$document","ContextMenuService",function(n,t){return{restrict:"A",scope:{callback:"&contextMenu",disabled:"&contextMenuDisabled",closeCallback:"&contextMenuClose"},link:function(l,c,o){function u(e,t){t.addClass("open");var l=n[0].documentElement,c=(window.pageXOffset||l.scrollLeft)-(l.clientLeft||0),o=(window.pageYOffset||l.scrollTop)-(l.clientTop||0),u=t[0].scrollWidth,i=t[0].scrollHeight,a=l.clientWidth+c,d=l.clientHeight+o,m=u+e.pageX,p=i+e.pageY,r=Math.max(e.pageX-c,0),f=Math.max(e.pageY-o,0);m>a&&(r-=m-a),p>d&&(f-=p-d),t.css("top",f+"px"),t.css("left",r+"px"),s=!0}function i(e){e.removeClass("open"),s&&l.closeCallback(),s=!1}function a(e){!l.disabled()&&s&&27===e.keyCode&&l.$apply(function(){i(t.menuElement)})}function d(e){l.disabled()||!s||2===e.button&&e.target===t.element||l.$apply(function(){i(t.menuElement)})}function m(){!l.disabled()&&s&&l.$apply(function(){i(t.menuElement)})}var s=!1;c.bind("contextmenu",function(n){l.disabled()||(null!==t.menuElement&&i(t.menuElement),t.menuElement=e.element(document.getElementById(o.target)),t.element=n.target,n.preventDefault(),n.stopPropagation(),l.$apply(function(){l.callback({$event:n})}),l.$apply(function(){u(n,t.menuElement)}))}),n.bind("keyup",a),n.bind("click",d),n.bind("contextmenu",d),n.bind("scroll",m),l.$on("$destroy",function(){n.unbind("keyup",a),n.unbind("click",d),n.unbind("contextmenu",d),n.unbind("scroll",m)})}}}])}(angular);